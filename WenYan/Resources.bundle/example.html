<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>WenYan</title>
        <script src="highlight/highlight.min.js"></script>
        <script src="csstree/csstree.js"></script>
        <script src="wenyan-math.js"></script>
        <script src="wenyan-styles.js"></script>
        <script src="wenyan-core.js"></script>
        <link rel="stylesheet" href="style.css">
        <style>
            :root {
                --sans-serif-font: system-ui, 'Apple Color Emoji', 'Segoe UI', 'Segoe UI Symbol', 'Noto Sans', 'Roboto', sans-serif;
                --monospace-font: Menlo, Monaco, Consolas, 'Liberation Mono', 'Roboto Mono', 'Courier New', 'Microsoft YaHei', monospace;
            }
            #wenyan pre {
                font-size: 12px;
            }
        </style>
        <style id="theme"></style>
        <style id="hljs"></style>
        <style id="macStyle"></style>
        <script>
            function setCss(cssText) {
                document.getElementById("theme").innerText = cssText;
            }

            async function setContent(content) {
                const preHandlerContent = WenyanCore.handleFrontMatter(content);
                let body = preHandlerContent.body;
                if (preHandlerContent.title) {
                    body = `# ${preHandlerContent.title}\n\n${body}`;
                }
                document.getElementById("wenyan").innerHTML = await WenyanCore.renderMarkdown(body);
            }

            (async () => {
                document.getElementById("hljs").innerText = await WenyanStyles.hlThemes["solarized-light"].getCss();
                document.getElementById("macStyle").innerText = window.macStyleCss;
            })();
        </script>
    </head>
    <body>
        <section id="wenyan" class="preview">
        </section>
    </body>
</html>
<script>
    WenyanCore.configureMarked();
    window.webkit.messageHandlers.loadHandler.postMessage(null);
</script>
